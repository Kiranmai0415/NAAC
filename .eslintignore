Unexpected use of comma operator